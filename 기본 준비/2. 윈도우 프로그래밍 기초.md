### 목차
- 프로그램 구조 개념
- 메시지 기반 구조
- 윈도우 클래스 등록과 생성
- 윈도우 프로시저
- 기본 실행 흐름 정리

### [1] 프로그램 구조 개념
- Windows 애플리케이션은 콘솔 프로그램처럼 int main()이 아니라 다음과 같은 진입점(entry point)을 갖는다
```cpp
#include <windows.h>

int WINAPI WinMain(
    HINSTANCE hInstance,      // 현재 실행 중인 프로그램의 인스턴스 핸들
    HINSTANCE hPrevInstance,  // 이전 인스턴스 (항상 NULL)
    LPSTR lpCmdLine,          // 명령행 인자
    int nCmdShow              // 윈도우 표시 상태
)
{
    MessageBox(NULL, "Hello, Windows!", "My First Program", MB_OK);
    return 0;
}
```

### [2] 메시지 기반 구조 (Message Loop)
Windows는 키보드 입력, 마우스 클릭, 창 이동 등 모든 동작을 “메시지(Message)”로 전달
따라서 프로그램은 메시지를 계속 받아 처리하는 루프를 가짐
```cpp
MSG msg;
while (GetMessage(&msg, NULL, 0, 0)) {
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}
```

-	GetMessage()는 메시지를 기다렸다가 받는 함수
-	TranslateMessage()는 키보드 메시지 변환
-	DispatchMessage()는 메시지를 윈도우 프로시저로 보냄
여기서 코드는 busy-waiting으로 보이지만, 사실 내부적으로 인터럽트 방식으로 구현되기 때문에 CPU를 점유하지 않음


### [3] 윈도우 클래스 등록과 생성
- 창(Windows)을 만들기 위해서는 먼저 창의 성격을 정의해야 함
- 이걸 “윈도우 클래스(Window Class)”라고 부름
```cpp
WNDCLASS wc = {};
wc.lpfnWndProc = WndProc;        // 메시지 처리 함수 등록
wc.hInstance = hInstance;
wc.lpszClassName = "MyWindowClass";

RegisterClass(&wc);
```
등록 후에는 실제 창을 생성

```cpp
HWND hwnd = CreateWindow(
    "MyWindowClass", "My First Window",
    WS_OVERLAPPEDWINDOW,
    CW_USEDEFAULT, CW_USEDEFAULT, 500, 400,
    NULL, NULL, hInstance, NULL
);
ShowWindow(hwnd, nCmdShow);
```
이때 하나의 윈도우 클래스 이름으로 여러 개의 창을 생성할 수 있음




### [4] 윈도우 프로시저(Window Procedure)
모든 메시지는 WindProc 함수로 전달되어 처리됨
```cpp
LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch (msg)
    {
    case WM_DESTROY:       // 창이 닫힐 때
        PostQuitMessage(0);
        return 0;

    case WM_PAINT:         // 화면 다시 그릴 때
        // 화면 갱신 코드
        break;
    }

    return DefWindowProc(hwnd, msg, wParam, lParam);
}
```



### [5] 기본 실행 흐름 정리
1. WinMain() 시작
2. 윈도우 클래스 등록
3. 윈도우 생성 및 표시
4. 메시지 루프 실행
5. 메시지를 WinProc()으로 전달
6. WM_DESTROY 발생 시 종료



